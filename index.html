<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive World Map</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script type="module" crossorigin src="/Mars-Eye-View/assets/index-CyEv-aAY.js"></script>
  <link rel="stylesheet" crossorigin href="/Mars-Eye-View/assets/index-sKeJtnBx.css">
</head>

<body>
    <nav class="breadcrumb" id="breadcrumb"><span class="crumb active">World</span></nav>
    <div id="map"></div>

    <div class="map-controls" id="map-controls">
        <div class="control-header" id="interactions-header">
            <span>Interactions</span>
            <span class="control-toggle-icon">▼</span>
        </div>
        <div class="control-body" id="interactions-panel">
            <!-- Dynamic Content Generated by app.js -->
        </div>
    </div>


    <div id="details-panel">
        <div class="panel-header">
            <div>
                <div class="panel-title" id="panel-title">Region</div>
                <div class="panel-subtitle" id="panel-subtitle">Details</div>
            </div>
            <button class="panel-close" id="panel-close">×</button>
        </div>

        <!-- Tab Bar -->
        <div class="panel-tabs" id="panel-tabs">
            <button class="tab active" data-tab="info">Info</button>
            <button class="tab" data-tab="wiki" id="tab-btn-wiki">Wikipedia</button>
            <button class="tab" data-tab="leaders" id="tab-btn-leaders" style="display:none">Leaders</button>
            <button class="tab" data-tab="predictions" id="tab-btn-predictions"
                style="display:none; color: #f87171;">ACLED CAST</button>
        </div>

        <div class="panel-content">
            <!-- TAB: Info (Consolidated) -->
            <div class="tab-pane active" id="tab-info">
                <div class="panel-section" id="panel-description-wrap" style="display:none">
                    <div id="panel-description"></div>
                </div>
                <div class="panel-section" id="section-quick-facts" style="display: none;">
                    <div class="panel-section-title">Overview</div>
                    <div class="facts-grid">
                        <div class="fact-item">
                            <div class="fact-label">Capital</div>
                            <div class="fact-value" id="data-capital">—</div>
                        </div>
                        <div class="fact-item">
                            <div class="fact-label">Continent</div>
                            <div class="fact-value" id="data-continent">—</div>
                        </div>
                        <div class="fact-item">
                            <div class="fact-label">Currency</div>
                            <div class="fact-value" id="data-currency">—</div>
                        </div>
                    </div>
                </div>

                <div class="panel-section" id="section-economy-tab" style="display: none;">
                    <div class="panel-section-title">Economy & Demographics</div>
                    <div class="data-row">
                        <span class="data-label">Population</span>
                        <span class="data-value" id="data-population">—</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">GDP</span>
                        <span class="data-value" id="data-gdp">—</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">GDP per Capita</span>
                        <span class="data-value" id="data-gdp-pc">—</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Area</span>
                        <span class="data-value" id="data-area">—</span>
                    </div>
                    <div class="update-notice" id="update-notice"></div>
                </div>

                <div class="panel-section" id="section-leaders-tab" style="display: none;">
                    <div class="panel-section-title">Current Leaders</div>
                    <div id="leaders-container"></div>
                </div>

                <div class="panel-section" id="section-symbols-tab" style="display: none;">
                    <div class="panel-section-title">Symbols</div>
                    <div class="data-table">
                        <div class="data-cell"><span class="cell-label">Animal</span><span class="cell-value"
                                id="symbol-animal">—</span></div>
                        <div class="data-cell"><span class="cell-label">Bird</span><span class="cell-value"
                                id="symbol-bird">—</span></div>
                        <div class="data-cell"><span class="cell-label">Flower</span><span class="cell-value"
                                id="symbol-flower">—</span></div>
                    </div>
                </div>

                <div class="panel-section" id="section-trivia-tab" style="display: none;">
                    <div class="panel-section-title">Codes</div>
                    <div class="data-table">
                        <div class="data-cell"><span class="cell-label">Calling</span><span class="cell-value"
                                id="trivia-calling">—</span></div>
                        <div class="data-cell"><span class="cell-label">Domain</span><span class="cell-value"
                                id="trivia-tld">—</span></div>
                        <div class="data-cell"><span class="cell-label">Drives</span><span class="cell-value"
                                id="trivia-driving">—</span></div>
                    </div>
                </div>

                <div class="panel-section" id="section-languages" style="display: none;">
                    <div class="panel-section-title">Languages</div>
                    <div class="tags-container" id="language-tags"></div>
                </div>

                <div class="panel-section" id="section-religions" style="display: none;">
                    <div class="panel-section-title">Religions</div>
                    <div class="religion-stacked-bar" id="religion-bar"></div>
                    <div class="religion-legend" id="religion-legend"></div>
                </div>

                <!-- Dispute Claimants (shown for disputes) -->
                <div class="panel-section" id="section-claimants" style="display: none;">
                    <div class="panel-section-title">Claimants</div>
                    <div class="tags-container" id="claimants-list"></div>
                </div>
            </div>

            <!-- TAB: Predictions -->
            <div class="tab-pane" id="tab-predictions">
                <div id="predictions-container">
                    <div class="panel-placeholder">Select a country to view forecasts.</div>
                </div>
            </div>

            <!-- TAB: Wikipedia - full page via mobile-optimized iframe -->
            <div class="tab-pane" id="tab-wiki">
                <div class="wiki-tab-container" id="wiki-tab-container">
                    <div id="wiki-tab-placeholder" class="wiki-tab-placeholder">
                        Select a region to load Wikipedia.
                    </div>
                    <iframe id="wiki-iframe" class="wiki-iframe" title="Wikipedia" style="display:none"
                        sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
                    <a id="wiki-open-newtab" href="#" target="_blank" rel="noopener" class="wiki-fallback-link" style="display:none">Open in new tab ↗</a>
                </div>
            </div>

        </div>

        <div id="loader">
            <div class="spinner"></div>
            <div id="loader-text">Loading...</div>
            <div class="loader-progress" id="loader-progress">
                <div class="loader-progress-bar" id="loader-progress-bar"></div>
                <div class="loader-progress-text" id="loader-progress-text">0%</div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.9/dist/purify.min.js"></script>
</body>

</html>
